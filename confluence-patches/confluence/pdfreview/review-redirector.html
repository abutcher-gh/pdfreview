<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head> <title>Review Redirector</title> </head>
<body>

<div id='main'>
   <h2>Error in call.  This page should be reached from Confluence.</h2>
</div>

<script type='text/javascript'>

var q = window.location.href.indexOf('?');
if (q > 0 && document.referrer != "" && window.parent)
{
   referrer = document.referrer + "&" + window.location.href.slice(q+1);

   querystring = referrer.slice(referrer.indexOf('?'));
   querymap = {};

   querystring.replace(
      new RegExp("([^?=&]+)(=([^&]*))?", "g"),
         function($0, $1, $2, $3) { querymap[$1] = $3; }
      );

   // redirect parent page if it was a review request
   if (querymap['reviewLabel'] != null)
      window.parent.location = querymap['base'] + "/plugins/pdfreview/start-review.action" + querystring;
}
</script>
</body>
</html>

